---
import "@docsearch/css/dist/style.css";
import DocSearch from "./DocSearch";
import "./HeaderButton.css";
import "./DocSearch.css";

export interface Props {
  lang?: string;
  labels: any;
}

const { lang, labels } = Astro.props as Props;
const { button, shortcutLabel, modal, placeholder } = labels;
---

<button
  class="header-button search-input px-4 py-1 w-80"
  type="button"
  aria-label={button}
  id="docsearch-search-button"
>
  <svg
    width="25"
    height="25"
    viewBox="0 0 18 18"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    focusable="false"
    aria-hidden="true"
    role="img"
  >
    <path
      d="M17.7473 16.4825L14.4102 13.17C15.7056 11.5537 16.3329 9.50215 16.1631 7.43721C15.9934 5.37227 15.0396 3.45088 13.4978 2.06813C11.9559 0.685379 9.94333 -0.0536394 7.87376 0.00303437C5.80419 0.0597081 3.83498 0.907766 2.37103 2.37283C0.907077 3.83789 0.0596628 5.8086 0.00303206 7.87974C-0.0535986 9.95088 0.684859 11.965 2.06656 13.508C3.44826 15.051 5.36819 16.0056 7.43156 16.1754C9.49493 16.3453 11.5449 15.7175 13.16 14.4212L16.47 17.7337C16.5536 17.8181 16.6531 17.8851 16.7627 17.9308C16.8723 17.9765 16.9899 18 17.1086 18C17.2274 18 17.3449 17.9765 17.4546 17.9308C17.5642 17.8851 17.6636 17.8181 17.7473 17.7337C17.9094 17.5659 18 17.3416 18 17.1081C18 16.8747 17.9094 16.6504 17.7473 16.4825ZM8.11399 14.4212C6.8687 14.4212 5.65139 14.0516 4.61597 13.3593C3.58056 12.6669 2.77355 11.6828 2.297 10.5315C1.82045 9.38009 1.69577 8.11316 1.93871 6.89088C2.18165 5.6686 2.78131 4.54586 3.66186 3.66464C4.54241 2.78343 5.66429 2.18331 6.88565 1.94018C8.107 1.69706 9.37297 1.82184 10.5235 2.29875C11.674 2.77566 12.6573 3.58328 13.3491 4.61948C14.041 5.65568 14.4102 6.87392 14.4102 8.12015C14.4102 9.79129 13.7469 11.394 12.5661 12.5757C11.3853 13.7573 9.78386 14.4212 8.11399 14.4212Z"
      fill="white"></path>
  </svg>
  <span class="search-placeholder">
    {button}
    <span class="sr-only">({shortcutLabel})</span>
  </span>
  <div class="flex w-full justify-end">
    <span
      class="relative end-0 py-1 px-1.5 rounded m-1 bg-gradient-to-r from-yellow-lightGradient to-yellow-darkGradient"
    >
      <kbd aria-hidden="true" class="py-1.5 px-0.5 text-purple-darkText">
        <svg
          width="10"
          height="11"
          viewBox="0 0 10 11"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2.17962 10.2042C1.82747 10.2042 1.50491 10.1184 1.21194 9.94673C0.918968 9.77214 0.685184 9.53835 0.510587 9.24538C0.338949 8.95241 0.253129 8.62985 0.253129 8.2777C0.253129 7.92259 0.338949 7.59854 0.510587 7.30558C0.685184 7.01261 0.918968 6.77882 1.21194 6.60423C1.50491 6.42963 1.82747 6.34233 2.17962 6.34233H3.20945V4.55788H2.17962C1.82747 4.55788 1.50491 4.47206 1.21194 4.30043C0.918968 4.12583 0.685184 3.89353 0.510587 3.60352C0.338949 3.31055 0.253129 2.98651 0.253129 2.63139C0.253129 2.27628 0.338949 1.95372 0.510587 1.66371C0.685184 1.37074 0.918968 1.13843 1.21194 0.966797C1.50491 0.792199 1.82747 0.7049 2.17962 0.7049C2.53473 0.7049 2.85878 0.792199 3.15174 0.966797C3.44471 1.13843 3.6785 1.37074 3.85309 1.66371C4.02769 1.95372 4.11499 2.27628 4.11499 2.63139V3.65234H5.89944V2.63139C5.89944 2.27628 5.98526 1.95372 6.15689 1.66371C6.33149 1.37074 6.56379 1.13843 6.8538 0.966797C7.14677 0.792199 7.47081 0.7049 7.82593 0.7049C8.18104 0.7049 8.5036 0.792199 8.79361 0.966797C9.08658 1.13843 9.31889 1.37074 9.49052 1.66371C9.66512 1.95372 9.75242 2.27628 9.75242 2.63139C9.75242 2.98651 9.66512 3.31055 9.49052 3.60352C9.31889 3.89353 9.08658 4.12583 8.79361 4.30043C8.5036 4.47206 8.18104 4.55788 7.82593 4.55788H6.80498V6.34233H7.82593C8.18104 6.34233 8.5036 6.42963 8.79361 6.60423C9.08658 6.77882 9.31889 7.01261 9.49052 7.30558C9.66512 7.59854 9.75242 7.92259 9.75242 8.2777C9.75242 8.62985 9.66512 8.95241 9.49052 9.24538C9.31889 9.53835 9.08658 9.77214 8.79361 9.94673C8.5036 10.1184 8.18104 10.2042 7.82593 10.2042C7.47081 10.2042 7.14677 10.1184 6.8538 9.94673C6.56379 9.77214 6.33149 9.53835 6.15689 9.24538C5.98526 8.95241 5.89944 8.62985 5.89944 8.2777V7.24787H4.11499V8.2777C4.11499 8.62985 4.02769 8.95241 3.85309 9.24538C3.6785 9.53835 3.44471 9.77214 3.15174 9.94673C2.85878 10.1184 2.53473 10.2042 2.17962 10.2042ZM2.17962 9.29865C2.36902 9.29865 2.54065 9.25278 2.69454 9.16104C2.85138 9.06931 2.97567 8.9465 3.06741 8.79261C3.1621 8.63577 3.20945 8.46413 3.20945 8.2777V7.24787H2.17962C1.99319 7.24787 1.82155 7.29522 1.66471 7.38991C1.51082 7.48165 1.38801 7.60594 1.29628 7.76278C1.20454 7.91667 1.15867 8.0883 1.15867 8.2777C1.15867 8.46413 1.20454 8.63577 1.29628 8.79261C1.38801 8.9465 1.51082 9.06931 1.66471 9.16104C1.82155 9.25278 1.99319 9.29865 2.17962 9.29865ZM2.17962 3.65234H3.20945V2.63139C3.20945 2.442 3.1621 2.27036 3.06741 2.11648C2.97567 1.96259 2.85138 1.83978 2.69454 1.74805C2.54065 1.65631 2.36902 1.61044 2.17962 1.61044C1.99319 1.61044 1.82155 1.65631 1.66471 1.74805C1.51082 1.83978 1.38801 1.96259 1.29628 2.11648C1.20454 2.27036 1.15867 2.442 1.15867 2.63139C1.15867 2.82079 1.20454 2.9939 1.29628 3.15075C1.38801 3.30463 1.51082 3.42744 1.66471 3.51918C1.82155 3.60795 1.99319 3.65234 2.17962 3.65234ZM6.80498 3.65234H7.82593C8.01532 3.65234 8.18696 3.60795 8.34084 3.51918C8.49473 3.42744 8.61754 3.30463 8.70927 3.15075C8.80101 2.9939 8.84688 2.82079 8.84688 2.63139C8.84688 2.442 8.80101 2.27036 8.70927 2.11648C8.61754 1.96259 8.49473 1.83978 8.34084 1.74805C8.18696 1.65631 8.01532 1.61044 7.82593 1.61044C7.63653 1.61044 7.46342 1.65631 7.30657 1.74805C7.15269 1.83978 7.02988 1.96259 6.93814 2.11648C6.84937 2.27036 6.80498 2.442 6.80498 2.63139V3.65234ZM7.82593 9.29865C8.01532 9.29865 8.18696 9.25278 8.34084 9.16104C8.49473 9.06931 8.61754 8.9465 8.70927 8.79261C8.80101 8.63577 8.84688 8.46413 8.84688 8.2777C8.84688 8.0883 8.80101 7.91667 8.70927 7.76278C8.61754 7.60594 8.49473 7.48165 8.34084 7.38991C8.18696 7.29522 8.01532 7.24787 7.82593 7.24787H6.80498V8.2777C6.80498 8.46413 6.84937 8.63577 6.93814 8.79261C7.02988 8.9465 7.15269 9.06931 7.30657 9.16104C7.46342 9.25278 7.63653 9.29865 7.82593 9.29865ZM4.11499 6.34233H5.89944V4.55788H4.11499V6.34233Z"
            fill="#1E182F"></path>
        </svg>
      </kbd>
    </span>
    <span
      class="relative end-0 py-0.5 px-1.5 rounded m-1 bg-gradient-to-r from-yellow-lightGradient to-yellow-darkGradient"
    >
      <kbd aria-hidden="true" class="py-1.5 px-0.5 text-sm text-purple-darkText"
        >k
      </kbd>
    </span>
  </div>
</button>
<DocSearch {...{ lang, labels: { modal, placeholder } }} client:only="preact" />

<style>
  /** Style search header button */
  .search-input {
    position: relative;
    display: flex;
    background-color: transparent;
  }

  .search-placeholder {
    text-align: initial;
    margin-inline-start: 0.25rem;
    margin-inline-end: 3rem;
    display: none;
  }

  @media (min-width: 50em) {
    .search-input {
      --background-color-default: var(--theme-divider);
      --border-color-default: var(--theme-divider);
      min-width: 10rem;
    }

    .search-placeholder {
      display: flex;
    }

    .search-keyboard-hint {
      display: flex;
    }
  }
</style>
