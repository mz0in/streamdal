import {
  listenKeys
} from "./chunk-AOSASYPN.js";
import {
  h,
  p
} from "./chunk-VBRYBN22.js";
import "./chunk-H2OGWW27.js";

// node_modules/@nanostores/preact/index.js
function useStore(store, opts = {}) {
  let [, forceRender] = p({});
  if (true) {
    if (typeof store === "function") {
      throw new Error(
        "Use useStore(Template(id)) or useSync() from @logux/client/preact for templates"
      );
    }
  }
  h(() => {
    let batching, timer, unlisten;
    let rerender = () => {
      if (!batching) {
        batching = 1;
        timer = setTimeout(() => {
          batching = void 0;
          forceRender({});
        });
      }
    };
    if (opts.keys) {
      unlisten = listenKeys(store, opts.keys, rerender);
    } else {
      unlisten = store.listen(rerender);
    }
    return () => {
      unlisten();
      clearTimeout(timer);
    };
  }, [store, "" + opts.keys]);
  return store.get();
}
export {
  useStore
};
//# sourceMappingURL=@nanostores_preact.js.map
